<!DOCTYPE html>
<html lang="en">
<head>
    <title>Savannah - NZEG</title>
    <link rel="stylesheet" href="../styles/cameraNavigation.css">
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.2.0/dist/aframe-extras.min.js"></script>
</head>
<body>
    <script>
        // function calcAngle(from, to) {
        //     let a = to[0] - from[0];
        //     let b = to[2] - from[2];

        //     let theta = Math.tan(a / b);
        //     console.log(theta)
            
        //     return (`0 ${theta} 0`);
        // }
    </script>
      <div>
        <button class="navigationButton navigationText" id="leftNavigationButton"><p class="center">&lt</p></button>
        <div id="navigationIndexDiv">
          <!--inital animal for navigation-->
          <p id="navigationIndex">Lion</p>
        </div>
        <button class="navigationButton navigationText" id="rightNavigationButton"><p class="center">&gt</p></button>
      </div>
    <a-scene id="aframe">
        <a-entity id="cameraRig" character-controller cursor-teleport="cameraRig: #cameraRig; cameraHead: #head; collisionEntities: .collision; ignoreEntities: .clickable,.navmesh-hole">
            <a-camera id="head" rotation="0 0 0" position="0 5 0" camera wasd-controls="enabled:true" look-controls="reverseMouseDrag: true" fov="43.8">
        </a-entity>
        <a-assets>
        </a-assets>
            <a-entity
                id="giraffe-A1"
                gltf-model="./assets/scene.glb"
                position="5 0 0"
                animation__0="
                    property: position;
                    from: 0 0 0;
                    to: 0 0 0;
                    dur: 0;
                "
                animation__1a="
                    startEvents: animationcomplete__0, animationcomplete__1d;
                    property: position;
                    from: 0 0 0;
                    to: 10 0 5;
                    autoplay: true;
                    dur: 5000;
                "
                animation__1b="
                    startEvents: animationcomplete__1a;
                    property: rotation;
                    from: 0 0 0;
                    to: 0 80 0;
                    autoplay: false;
                    dur: 2000
                "
                animation__1c="
                    startEvents: animationcomplete__1b;
                    property: position;
                    from: 10 0 5;
                    to: 0 0 0;
                    autoplay: false;
                    dur: 2000
                "
                animation__1d="
                    startEvents: animationcomplete__1b;
                    property: rotation;
                    from: 0 90 0;
                    to: 0 0 0;
                    autoplay: false;
                    dur: 2000
                "
            >
            </a-entity>
            
        <a-box position="5 0 5" color="blue"></a-box>
        <a-cylinder shadow="cast: true;" color="#FFFACD" position="0 -11.5 0" height="3" radius="500"></a-cylinder>
    </a-scene>

    <script>
        var el = document.querySelector('#giraffe-A1')

        // object
        let giraffeAnimation = {
            endDrinking: 'EndDrinking'
        }

        function animationCorresponder(event) {
            switch(event.detail.name) {
                case "animation__1a":
                    el.setAttribute('animation-mixer', {'clip': 'loopRun'});
                    break;
                case "animation__1b":
                    el.setAttribute('animation-mixer', {'clip': 'EndDrinking'});
                    break;
                case "animation__1c":
                    el.setAttribute('animation-mixer', {'clip': 'loopRun'});
                    break;
                case "animation__1d":
                    el.setAttribute('animation-mixer', {'clip': 'EndDrinking'});
                    break;
                default:
                    break;
            }
        }

        el.addEventListener('animationbegin', function (e) {
            console.log(e.detail.name);
        })

        el.addEventListener('animationbegin', animationCorresponder)
    </script>
        <script type="module" src="../scripts/cameraNavigation.js"></script>
</body>
</html>